export default (request) => {
    if ((request.message.event == "announcement" || request.message.event == "failure") || request.channels[0].startsWith("blocks-output")) {
        return request.ok();
    }

    if (request.verb != "publish") {
        return request.ok();
    }

    console.log("HELLO");
    const kvstore = require('kvstore');
    const xhr = require('xhr');
    var badWords = new RegExp(/.*\b(bhen|bhenchod|bhosad|chinal|chod|choot|chut|chutiye|loda|lund|madar|madarchod|rand|randi|a55|a55hole|aeolus|ahole|anal|analprobe|anilingus|anus|areola|areole|arian|aryan|ass|assbang|assbanged|assbangs|asses|assfuck|assfucker|assh0le|asshat|asshole|assho1e|ass hole|assholes|assmaster|assmunch|asswipe|asswipes|azazel|azz|b1tch|babe|babes|ballsack|bang|banger|barf|bastard|bastards|bawdy|beaner|beardedclam|beastiality|beatch|beater|beaver|beer|beeyotch|beotch|biatch|bigtits|big tits|bimbo|bitch|bitched|bitches|bitchy|blow job|blow|blowjob|blowjobs|bodily|boink|bollock|bollocks|bollok|bone|boned|boner|boners|bong|boob|boobies|boobs|booby|booger|bookie|bootee|bootie|booty|booze|boozer|boozy|bosom|bosomy|bowel|bowels|bra|brassiere|breast|breasts|bugger|bukkake|bullshit|bull shit|bullshits|bullshitted|bullturds|bung|busty|butt|butt fuck|buttfuck|buttfucker|buttfucker|buttplug|c.0.c.k|c.o.c.k.|c.u.n.t|c0ck|c-0-c-k|caca|cahone|cameltoe|carpetmuncher|cawk|cervix|chinc|chincs|chink|chink|chode|chodes|cl1t|climax|clit|clitoris|clitorus|clits|clitty|cocain|cocaine|cock|c-o-c-k|cockblock|cockholster|cockknocker|cocks|cocksmoker|cocksucker|cock sucker|coital|commie|condom|coon|coons|corksucker|crabs|crack|cracker|crackwhore|crap|crappy|cum|cummin|cumming|cumshot|cumshots|cumslut|cumstain|cunilingus|cunnilingus|cunny|cunt|cunt|c-u-n-t|cuntface|cunthunter|cuntlick|cuntlicker|cunts|d0ng|d0uch3|d0uche|d1ck|d1ld0|d1ldo|dago|dagos|dammit|damn|damned|damnit|dawgie-style|dick|dickbag|dickdipper|dickface|dickflipper|dickhead|dickheads|dickish|dick-ish|dickripper|dicksipper|dickweed|dickwhipper|dickzipper|diddle|dike|dildo|dildos|diligaf|dillweed|dimwit|dingle|dipship|doggie-style|doggy-style|dong|doofus|doosh|dopey|douch3|douche|douchebag|douchebags|douchey|drunk|dumass|dumbass|dumbasses|dummy|dyke|dykes|ejaculate|enlargement|erect|erection|erotic|essohbee|extacy|extasy|f.u.c.k|fack|fag|fagg|fagged|faggit|faggot|fagot|fags|faig|faigt|fannybandit|fart|fartknocker|fat|felch|felcher|felching|fellate|fellatio|feltch|feltcher|fisted|fisting|fisty|floozy|foad|fondle|foobar|foreskin|freex|frigg|frigga|fubar|fuck|f-u-c-k|fuckass|fucked|fucked|fucker|fuckface|fuckin|fucking|fucknugget|fucknut|fuckoff|fucks|fucktard|fuck-tard|fuckup|fuckwad|fuckwit|fudgepacker|fuk|fvck|fxck|ganja|gay|gays|gey|gfy|ghay|ghey|gigolo|glans|goatse|godamn|godamnit|goddam|goddammit|goddamn|goldenshower|gonad|gonads|gook|gooks|gringo|gspot|g-spot|gtfo|guido|h0m0|h0mo|handjob|hard on|he11|hebe|heeb|hell|hemp|heroin|herp|herpes|herpy|hitler|hiv|hobag|hom0|homey|homo|homoey|honky|hooch|hookah|hooker|hoor|hootch|hooter|hooters|horny|hump|humped|humping|hussy|hymen|inbred|incest|injun|j3rk0ff|jackass|jackhole|jackoff|jap|japs|jerk|jerk0ff|jerked|jerkoff|jism|jiz|jizm|jizz|jizzed|junkie|junky|kike|kikes|kill|kinky|kkk|klan|knobend|kooch|kooches|kootch|kraut|kyke|labia|lech|leper|lesbians|lesbo|lesbos|lez|lezbian|lezbians|lezbo|lezbos|lezzie|lezzies|lezzy|lmao|lmfao|loin|loins|lube|lusty|mams|massa|masterbate|masterbating|masterbation|masturbate|masturbating|masturbation|maxi|menses|menstruate|menstruation|meth|m-fucking|mofo|molest|moolie|moron|motherfucka|motherfucker|motherfucking|mtherfucker|mthrfucker|mthrfucking|muff|muffdiver|murder|muthafuckaz|muthafucker|mutherfucker|mutherfucking|muthrfucking|nads|naked|napalm|nappy|nazi|nazism|negro|nigga|niggah|niggas|niggaz|nigger|nigger|niggers|niggle|niglet|nimrod|ninny|nipple|nooky|nympho|opiate|opium|oral|orally|organ|orgasm|orgasmic|orgies|orgy|ovary|ovum|ovums|p.u.s.s.y.|paddy|paki|pantie|panties|panty|pastie|pasty|pcp|pecker|pedo|pedophile|pedophilia|pedophiliac|pee|peepee|penetrate|penetration|penial|penile|penis|perversion|peyote|phalli|phallic|phuck|pillowbiter|pimp|pinko|piss|pissed|pissoff|piss-off|pms|polack|pollock|poon|poontang|porn|porno|pornography|pot|potty|prick|prig|prostitute|prude|pube|pubic|pubis|punkass|punky|puss|pussies|pussy|pussypounder|puto|queaf|queef|queef|queer|queero|queers|quicky|quim|racy|rape|raped|raper|rapist|raunch|rectal|rectum|rectus|reefer|reetard|reich|retard|retarded|revue|rimjob|ritard|rtard|r-tard|rump|rumprammer|ruski|s.h.i.t.|s.o.b.|s0b|sadism|sadist|scag|scantily|schizo|schlong|screw|screwed|scrog|scrot|scrote|scrotum|scrud|scum|seaman|seamen|seduce|semen|sex|sexual|sh1t|s-h-1-t|shamedame|shit|s-h-i-t|shite|shiteater|shitface|shithead|shithole|shithouse|shits|shitt|shitted|shitter|shitty|shiz|sissy|skag|skank|slave|sleaze|sleazy|slut|slutdumper|slutkiss|sluts|smegma|smut|smutty|snatch|sniper|snuff|s-o-b|sodom|souse|soused|sperm|spic|spick|spik|spiks|spooge|spunk|steamy|stfu|stiffy|stoned|strip|stroke|stupid|suck|sucked|sucking|sumofabiatch|t1t|tampon|tard|tawdry|teabagging|teat|terd|teste|testee|testes|testicle|testis|thrust|thug|tinkle|tit|titfuck|titi|tits|tittiefucker|titties|titty|tittyfuck|tittyfucker|toke|toots|tramp|transsexual|trashy|tubgirl|turd|tush|twat|twats|ugly|undies|unwed|urinal|urine|uterus|uzi|vag|vagina|valium|viagra|virgin|vixen|vodka|vomit|voyeur|vulgar|vulva|wad|wang|wank|wanker|wazoo|wedgie|weed|weenie|weewee|weiner|weirdo|wench|wetback|wh0re|wh0reface|whitey|whiz|whoralicious|whore|whorealicious|whored|whoreface|whorehopper|whorehouse|whores|whoring|wigger|womb|woody|wop|wtf|x-rated|xxx|yeasty|yobbo|zoophile|instagram|facebook|twitter|snapchat|gÃ¶t|g.Ã¶t|got|g.ot|go.t|kÄ±Ã§Ä±mÄ±n kenarÄ±|anal|a.n.a.l|an.al|a.nal|aq|a.q|aqqq|aqq|aqqqq|a.koyim|amq|anÃ¼s|dÄ±ÅŸkÄ±|kÄ±Ã§|amk|a.m.k|a.mk|am.k|amÄ±na koyayÄ±m|amb|amÄ±na basayÄ±m|amÄ±na basim|amÄ±na basiim|amÄ±na bsim|mÄ±na basiim|siktir|sktr|siktir git|s1kt1r|s1ktr|sikt1r|skerim|sikerim|s1kerim|s.ikerim|sik.erim|sike.rim|si.kerim|sik3rim|sik.3rim|s1kmek|s1km3k|s1k.mek|sik.m3k|sikm3k|sikmek|hassiktir|hassÄ±ktÄ±r|hasiktir|ha siktir|hsktr|ha.siktir|has.iktir|has1kt1r|amcÄ±k|amcik|taÅŸÅŸak|eÅŸoÄŸuleÅŸek|eÅŸÅŸoÄŸuleÅŸÅŸek|eÅŸsÄŸlssk|s1pa|sip.a|sÄ±pa|sipa|yarrak|yarrrrak|yar.rak|y4r4k|y4rr4k|y.arak|y.arrak|yarrrraaak|yarrak|yaraÄŸim|y.araÄŸim|yar.aÄŸim|y4r4ÄŸim|yaraÄŸi.m|yarraÄŸim|yaarraaaaÄŸim|yarraaÄŸim|yrÄŸm|yrrÄŸm|puÅŸt|pust|ibne|orospu|orospu Ã§ocuÄŸu|orospu cocugu|amkafa|amcÄ±k kafa|bira|piÃ§|pÃ§|p1Ã§|p.iÃ§|pÄ±Ã§|piÃ§ kurusu|meme|memeler|meme ucu|baÄŸÄ±rsak|baÄŸÄ±rsaklar|sÃ¼tyen|gÃ¶ÄŸÃ¼sbaÄŸÄ±|gerizekalÄ±|popo|ereksiyon|bok|boklu|boktan|penis|maslahat|Ã§Ã¼k|sik|kÄ±Ã§ kÄ±lÄ±|kic kili|kemik|genelev|konsomatris|serviks|rahim|rahim boynu|dÃ¶lyataÄŸÄ± boynu|vajina|klitoris|dilak|dÄ±lak|kaka|orgazm|orgzm|kokain|heroin|kondom|fahiÅŸe|fuhuÅŸ|kaltak|kevaÅŸe|sperm|boÅŸalmak|dildo|libido|kahretsin|lanet olsun|lanetli|amcÄ±k beyin|mal|dangalak|hÃ¶dÃ¼k|denyo|aÅŸaÄŸÄ±lÄ±k herif|arÄ±zalÄ±|arizali|aptal|ahmak|keriz|kalÄ±n kafa|erotik|sertleÅŸmek|sikik|defol|def ol|defol git|gay|jigolo|allah kahretsin|homo|hitler|azgÄ±n|abaza|ensest|ensest iliÅŸki|it|hÄ±rbo|yavÅŸak|dalyarak|pislik|lavuk|hÄ±yar|dallama|eÅŸek herif|budala|mankafa|hÃ¼cre|aids|hiv|cehennem|kÄ±lÄ± kÄ±rk yaran|makat|hayalar|Ã§iftleÅŸme|paÃ§oz|ÅŸÄ±rfÄ±ntÄ±|sÃ¼rtÃ¼k|aÅŸufte|lezbiyen|ot|sapÄ±k|sapÄ±kÃ§a|mastÃ¼rbasyon|sÄ±Ã§tÄ±k|sÄ±Ã§mak|sÄ±Ã§Ä±p batÄ±rmak|amÄ± gÃ¶tÃ¼ daÄŸÄ±tmak|boku yemek|gÃ¶te gelmek|cehennemin dibi|gÃ¶tveren|gÃ¶tverenler|nonoÅŸ|top|sarhoÅŸ|afyon|esrar|domaltmak|sikiÅŸmek|mala vurmak|salak|eÅŸcinsel|pavyon|g-noktasÄ±|gnoktasÄ±|aryan|arian|skiyim|ami|dingiller|bu ne aq|putlara|kemlistim|fake|ramazan dalga gecin|Ã§ok cezmiymis|mevlana|gÃ¶tÃ¼ne|gÃ¶tsÃ¼n|gÃ¶toÅŸlar|deÄŸerlerle dalga|dÃ¶l israflarÄ±|kavat|gavat|escort|eskort|beyinsiz|Ã§alÄ±ntÄ± mizahlar|o.Ã§ocuklarÄ±na|spermler|boku Ã§Ä±ktÄ±|karaktersizlik|tersden sikerim|tersalipdÃ¼zsikerim|tersden girerim|sizi yetiÅŸtiren|ÅŸerefsizleÅŸti|daÅŸÅŸak|pezevenkler|siktiiiminin|yardÄ±ma ihtiyacÄ± olan Ã¶ÄŸrenci|pezewenkler|bosaldiklarim|ataputcu|#imamhatiplerkapatilsin|putÃ§ular|amcÄ±klanmasÄ±|sokayÄ±m|sikmiÅŸlerse|sÄ±Ã§arkende|kÄ±Ã§Ä±namÄ±|kÄ±Ã§Ä±na mÄ±|kÄ±Ã§Ä± mÄ±|gaymisin|gay|gÃ¶tdenmÄ±|instagram|kici mi|sÄ±Ã§Ä±yor|orosbu|halep|#halep|gif porn|duvarina|iÅŸedim|gotune|amuÄŸa|boku|siktin|Ä±bnesÄ±|o..Ã§ocuÄŸu|yavÅŸaklÄ±k|gavatÄ±n|gavatlÄ±k|sÄ±kerler|ÅŸerefsizz|serefsÄ±z|orosspuuu|amkmun|ÅŸerefsizin|amuÄŸa goyim|amuÄŸa koyiim|amuÄŸa koyim|yarrrrak|sÄ±Ã§sÄ±n|sikiyor|badenin|arakliyican|arakliycan|siktimin|siktiklerim|orozbu|orrrospu|orrrosbu|amÄ±na.kodumun|siktiler|sikmiÅŸler|sÄ±Ã§mÄ±ÅŸlar|sÄ±Ã§ayÄ±m|piÃ§sin|taÅŸaÄŸÄ±nÄ±zÄ±|daÅŸÅŸak|dÃ¶lleri|orospunun|sikiyle|ananinizdirabinisikim|ananinizdirabinisikeyim|sikiÅŸmiÅŸ|ananÄ±za|gÃ¶tÃ¼nÃ¼|sikinden|amÄ±nakodu|siktiÄŸim|siktim|boÅŸalÄ±yo|sikmemiÅŸler|pezevenkler|o.cocugu|sikmese|bosaldÄ±m|siqem|zikeyim|zikinden|sÃ§tm|zÄ±kÄ±cem|amÄ±na|siki|sikip|sikyim|sÄ±Ã§im|boÅŸal|ibnetor|siksin|gÃ¶tten|gÃ¶te|amÄ±|saksÄ±|siksen|sikilmez|blowjob|penisini|masturbasyon|yrrak|soksun|amlÄ±|anan|anana|dallama|hssktir|ibretlik|ipne|karÄ±|kaÅŸar|kÅŸr|ka.ÅŸar|k.aÅŸar|kaÅŸ.ar|kaÅŸa.r|mallar|o.Ã§|oÃ§|oc|o.Ã§.|pezeveng|pzvng|porn|porno|s.kerler|sikiim|sikti|sikiÅŸ|sikiÅŸtik|siktirin|sktrn|soktumun|sÄ±Ã§mÄ±ÅŸ|yarak|yavÅŸaÄŸÄ±n|haÅŸim|bitmediniz|gÃ¼lÃ¼m|dÃ¶te|usama|osama|sayfa yÃ¶netiminin|geri zekalÄ±larla|berkin|amdin|kemalde|kemalden|admin|amdin|yalanlarÄ±nÄ±|yansikmek|dandirikten|dingiller|boku yedik|#ggyg|#ggysat|sikerler|seviÅŸ|Ã§alacan|yakinsin sende al|provokatÃ¶rsÃ¼n|ahmet aygÃ¼n|saÃ§ma olmuÅŸ|dini deÄŸerler|maÄŸara|futbolasting|aminyum|mÄ±na|orospunun|tecavÃ¼z|tecavÃ¼zcÃ¼|tecavuzcu|tecavuz|tecavÃ¼z ederler|tecavÃ¼z etsinler|homoseksÃ¼el|homoseksuel|gey|Ã§ete|Ã§ete misiniz|Ã§etemisiniz|cetemisiniz|fvck|fuck|nigga|nigger|sikem|blowjobs|blow job|Ã¶l|Ã¶lÃ¼m|Ã¶ldÃ¼rmek|Ã¶ldÃ¼rÃ¼rÃ¼m|Ã¶lÃ¼rsÃ¼n|Ã¶lmek|Ã¶l aq|t|fck|f*ck|f*vk|basarÄ±m|dope|doping|osuruk|osurmak|osur|haydut|eÅŸkiya|eskiya|Ä±zbandut|izbandut|ÅŸehir|eÅŸkiyasÄ±|oral seks|aÄŸzina boÅŸalayim|bedensel|fiziki|bedenen|seks yapmak|testisler|testis|iÃ§ine etmek|icine etmek|iÃ§ine ettin|icine ettin|iÃ§in e ettin|icin e ettin|icine etti|sigara|biriyle yatmak|kemikli|sÃ¼mÃ¼k|sumuk|kalÃ§a|kalca|iÃ§kici|ickici|ayyaÅŸ|ayyas|sarhos|hayvan|tezek|kaltak karÄ±|kaltak kari|adi|ciÄŸeri peÅŸ para etmez|tokmakÃ§Ä±|tokmakcÄ±|pompacÄ±|pompaci|sikici|eline verdi|aÄŸzina verdi|aÄŸzina verdim|elineverdi|elineverdim|skci|s-i-k-i-c-i|gÃ¶t herif|dÄ±ldo|ana avrat|Ã§atlak|bÄ±zÄ±r|bizir|kokainman|sana girerim|zevk suyu|iÃ§ine boÅŸalma|icine bosalma|Ä±cÄ±ne bosalma|sÃ¼prÃ¼ntÃ¼|zÄ±rva|zÄ±rvalama|zirvalama|zÄ±rvalÄ±k|bok ÅŸey|boktan laf|vay anasÄ±nÄ±|bombok|bombk|bmbk|bok surat|yabancÄ±|allah seni kahretsin|babanisikim|ananisikim|ablanisikim|kardeÅŸinisikim|bacinisikim|baÃ§inisikim|a.nanisikim|anani.sikim|anan1s1k1m|ananis1kim|ananisik1m|kahretsin seni|dom almak|dal yarak|dal yarrak|kayganlaÅŸtÄ±rÄ±cÄ±|budala|alÄ±k|pÄ±slÄ±k|kamÄ±ÅŸ|kamÄ±s|kamis|moron|mrn|grzklÄ±|gerzek|gerzek herif|ahmak herif|mallÄ±k|mallik|mallik|mallÄ±k yapma|malsÄ±n|malsin|fack|fak|ÅŸiÅŸko|sisko|tombul|tombul ÅŸiÅŸko|osuruk atmak|yellenme|yelenme|yellenmek|mala mÄ± baÄŸladÄ±n|mala baÄŸladÄ±|mala baÄŸlamak|moruk|sperm yalamak|sperm yalatirim|sperm yalatirdim|sperm yalayan|beceriksiz|sakar|saldÄ±rgan|hantal|gulfe|sÃ¼nnet derisi|sunnet derisi|yaraklara gelmek|siki tutmuÅŸ|siki tuttuk|siki tutmus|kenevir|kahrolasÄ±|kahrolasi|aranmak|beyaz var mÄ±|iÃ§ki|icki|abazan|azgÄ±nlaÅŸmak|azginlasmak|boynuz geÃ§irmek|boynuz gecirmek|boynuzu geÃ§irmek|mercimeÄŸi fÄ±rÄ±na vermek|mercimeyi firina vermek|mercimeyi fÄ±rÄ±na vermek|yataÄŸa atmak|yataga atmak|yataÄŸa attÄ±m|siktim|cinsel iliÅŸki|cinsel iliski|ÅŸÄ±llÄ±k|sillik|edepsiz|edep|atagazli|ataÄŸazlÄ±|taÅŸÅŸaksiz|tassaksiz|taÅŸak|tasak|ambiti|ÅŸirret|kÄ±zlÄ±k zarÄ±|kizlik zari|himen|kÄ±zlÄ±k bozulmasÄ±|bakirelik|bakire|zihinsel engelli|zihinsel engelliler|bedensel engelli|bedensel engelliler|engelli|engelliler|Ã¶zÃ¼rlÃ¼|Ã¶zÃ¼rlÃ¼ler|ozurlu|ozurluler|sakat|sa.kat|uyuz|uyuzdur|ÅŸahsiyetsiz|akraba kurbanÄ±|akraba kurbani|akraba kurbanlarÄ±|akraba kurbanlari|enest fantezisi|ensest fantazisi|kÄ±zÄ±ldereli|kizildereli|asÄ±lmak|asilmak|31 Ã§ekmek|31 olsan cekilmesin|am tipasi|tek atmak|tekatmak|japon|japonlar|otist|anneanneni sikiyim|anneanneni sikim|babaanneni sikim|babaaneni sikiyim|otistli|otizm|kafan mÄ± iyi|kafanmÄ± iyi|kafanmi iyi|kafan mi iyi|kafasÄ± iyi olmak|kafasi iyi olmak|kafasÄ±z|kafasiz|beyinsiz|beyÄ±nsÄ±z|kÃ¼felik|kufelik|uyuÅŸturucu|uyusturucu|herpes|keÅŸ|kes|esrarkeÅŸ|cibiliyetinisikiyim|cibiliyetinisikim|esrarkes|uyuÅŸturucu baÄŸÄ±mlÄ±sÄ±|uyusturucu bagimlisi|uyuÅŸturucu mÃ¼ptelasÄ±|uyusturucu muptelasi|yahudi|yahudiler|dinsiz|imansiz|dinden Ã§Ä±kmÄ±ÅŸ|dinden cikmis|dinden Ã§Ä±karÄ±rlar|dinden cikarirlar|din den Ã§Ä±karÄ±rlar|din den Ã§Ä±kmÄ±ÅŸ|din iman|jew|Ã¶l gerizekalÄ±|katletmek|katledilmiÅŸ|katledilmek|katledilmis|Ä±rkÃ§Ä±|Ä±rkcÄ±|irkci|mezhep|mezhepler|islam|mÃ¼slÃ¼man|mÃ¼slÃ¼manlar|hristiyan|hristiyanlÄ±k|hristiyanlar|katolik|ortodoks|tarikat|cemaat|kumarhane|kumar|zebani|zebanÄ±|serseri|serserÄ±|cehenneme git|yabancÄ± kimse|kÃ¼rt|apo|abdullah Ã¶calan|pkk|cÃ¼k|yumurtalÄ±k|yumurtalik|erbezi|eÅŸeylik organÄ±|eseylik organi|eÅŸey oranÄ±|esey organi|haÅŸhaÅŸ|hashas|kendir otu|kendir|otu|toz|eroin|klitorisin|klitorisi|parmaklamak|parmaklarÄ±m|parmaklarim|Ã¼stÃ¼ne boÅŸalÄ±rÄ±m|ataputum|ananÄ±|anani|sikseler|kudÃ¼s|afrin|kudus|Ã§alÄ±ntÄ±|calinti|Ã§al|cal|ali ismail korkmaz|siktirtme gÃ¶tÃ¼nÃ¼|sikimde deÄŸil|sikimde degil|siktirtme gotunu|sktrgt|sie|s.ie|si.e|sie.|.sie|gÃ¶tlalesi|babaninÅŸarapcanaÄŸisiÃ§im|babaninsarapcanagsicim|ebenisikim|ebeninamk|ebnin aminakoyim|ebenysikim|ebeninaminadÃ¶n|annaninaminadÃ¶n|amgÃ¼llÃ¼|ebenin|maymun|maimun|annaninamindanbasayikiraliolurum|ananin aminda nba sayi kÄ±ralÄ± olurum|kÃ¶pek|bamya|allah belani versin|mck|ayÄ±|eÅŸek|dinsiz|abobado|abobada|abombado|abombada|adoquÃŒn|arracacho|arracacha|asnejÃ›n|atropellaplatos|autÃ›mata|babanco|babieca|babilÃ›n|babilÃœna|baboso|babosa|bambarria|barbitonto|barbitonta|bato|baus ·n|bausano|bausana|beocio|beocia|besugo|bobalÃŒas|bobalicÃ›n|bobalicÃœna|bobarrÃ›n|bobarrÃœna|bobatel|bobo|boba|bobote|borde|boto|bota|botoso|botosa|bruto|bruta|bucÃˆfalo|calilo|calila|calzonudo|calzonuda|camote|cantimpla|capirote|capullo|carechimba|cazurro|cazurra|cebollino|celestial|cenutrio|ceporro|cerrado|cerrada|cipote|cojudo|cojuda|cretino|cretina|culo|cutama|cutre|chango|changa|chorra|desorejado|desorejada|dundo|dunda|enorme|estulto|estulta|estË™pido|est pida|falo|falto|falta|fatulo|fatula|fuÃ’ique|ganso|gansa|gazn ·piro|gazn-pira|gilÃŒ|gilipollas|gonorrea|gordo|gorda|guaje|guajolote|guanaco|harÃ›n|harÃœna|idiota|insensato|insensata|lerdo|lerda|leso|lesa|lila|lipendi|madero|malparido|mamacallos|mameluco|mastuerzo|maricÃ›n|melÃ›n|melona|memo|mema|mendrugo|menguado|menguada|menso|mensa|mentecato|mentecata|mentecapto|merluzo|minguado|minguada|molondro|moscatel|mË™cura|mudo|muda|muÃˆrgano|noneco|noneca|obtuso|obtusa|opa|otario|otaria|panarra|papirote|pavisoso|pvaisosa|pavitonto|pvaitonta|peal|pendejo|pene|percebe|pirobo|porro|poste|premioso|premiosa|puto|puta|r ·cano|retrasado|salame|salamÃŒn|samarugo|sanano|sanana|simple|simplÃŒsimo|simplÃ›n|subnormal|soca|suato|suata|tarado|tarada|tardo|tarda|tarugo|tocho|tocha|tolete|tolondrÃ›n|tolondrÃœna|tontarrÃ›n|tontarrÃœna|tontera|tontiloco|tontiloca|tontivano|tonitvana|tonto|tonta|tontÃ›n|tontÃœna|tontucio|tontucia|tontuelo|tontuela|tontuna|tordo|torda|torgado|torgada|torpe|torpÃ›n|torpÃœna|trompo|tupido|tupida|valeverga|yegua|zamacuco|zamacuca|zamarro|z ·ngano|z ·ngana|zolocho|zompo|zompa|zonzo|zonza|zonzorriar|zopenco|zopenca|zoreco|zoreca|zorra|zorimbo|zorimba|zote)\b.*/, "i");

    //Option 1 - Replace profanity text with * and allow the publish
    badWords.lastIndex = 0;
    if (request.message.content && request.message.content.type && request.message.content.type === "text" && request.message.content.body && badWords.test(request.message.content.body)) {
        console.log("Found bad word(s)");
        badWords.lastIndex = 0;
        var newString = request.message.content.body;
        var messageArray = newString.split(/\s+/);
        if (messageArray.length > 0) {
            newString = "";
            for (var i = 0; i < messageArray.length; i++) {
                var value = messageArray[i];
                badWords.lastIndex = 0;
                if (value) {
                    newString = newString.concat(" " + value.trim().replace(badWords, "****"));
                }
            }
        }
        request.message.content.body = newString;
        badWords.lastIndex = 0;
        return request.ok(); // Return a promise when you're done
    }

    /*
    Option 2 - Block message and return a publish error if the text includes profanity
    if(badWords.test(request["message"]["text"])) {
        console.log('moderated message: ' + request["message"]["text"]);
        return request.abort("moderated message")
        return request.ok();
    }
    */

    return request.ok(); // Return a promise when you're done
};